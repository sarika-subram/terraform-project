<!DOCTYPE html>
<html>

<head>
    <title>My Website</title>
</head>

<body>
    <h1>Welcome to my website!</h1>
    <p>This website is hosted on an S3 bucket and connected to an ALB.</p>
    <p>The ALB endpoint is: <span id="alb-endpoint"></span></p>
    <div>
        <h2>Response from ALB:</h2>
        <pre id="alb-response"></pre>
    </div>

    <script>
        // Replace this with the actual ALB endpoint
        const albEndpoint = '${module.load_balancer.lb_dns_name}';

        // Function to fetch data from the ALB endpoint
        async function fetchDataFromALB() {
            try {
                const response = await fetch(albEndpoint);
                const data = await response.text();
                document.getElementById('alb-response').textContent = data;
            } catch (error) {
                console.error('Error fetching data from ALB:', error);
            }
        }

        // Call the fetchDataFromALB function when the page loads
        window.onload = fetchDataFromALB;
    </script>
</body>

</html>